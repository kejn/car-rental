<!DOCTYPE html>
<html xmlns:th="http://thymeleaf.org">
<head lang="en">
<meta charset="UTF-8" />
</head>
<body>
	<div th:fragment="nav">
		<div id="nav" class="whitebg">
			<div class="content">
				<div>
					<a th:href="@{/home}">Strona główna</a>
				</div>
				<div>
					<a th:href="@{/cars}">Lista samochodów</a>
				</div>
			</div>
		</div>
	</div>
	<div th:fragment="search">
		<script th:inline="javascript">
		$(document).ready(function() {
			if([[${manufacturers.size()}]] == 1) {
				$("#manufacturer").prop("selectedIndex", 1);
		    } else {
				$("#clearM").css("visibility", "hidden");
		    }
			if([[${locations.size()}]] == 1) {
				$("#location").prop("selectedIndex", 1);
		    } else {
				$("#clearL").css("visibility", "hidden");
		    }
			
			var form = $("form[name='search']"); 
		
			$("#clearM").click(function() {
				$("#manufacturer").prop("selectedIndex", 0);
				form.submit();
			});
			$("#clearL").click(function() {
				$("#location").prop("selectedIndex", 0);
				form.submit();
			});
		});
		</script>
		<div id="search" class="content whitebg">
			<form name="search">
				<div>
					Producent: <select id="manufacturer" name="manufacturer" onchange='this.form.submit()'>
						<option label="* (Wszyscy producenci)" value="">* (Wszyscy producenci)</option>
						<option th:each="manufacturer : ${manufacturers}" th:text="${manufacturer.name}" th:value="${manufacturer.name}" />
					</select>
					<button id="clearM">X</button>
				</div>
				<div>
					Lokalizacja: <select id="location" name="location" onchange='this.form.submit()'>
						<option label="* (Wszystkie miasta)" value="">* (Wszystkie miasta)</option>
						<option th:each="location : ${locations}" th:text="${location.name}" th:value="${location.name}" />
					</select>
					<button id="clearL">X</button>
				</div>
			</form>
		</div>
	</div>
</body>
</html>